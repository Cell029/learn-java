在Java的编译器中，大体可以分为三类：

- **前端编译器**：类似于 javac 、JDT 中的ECJ增量编译器等。就是指将`.java`的源代码编译成`.class`字节码指令的编译器。
- **后端编译器**：也就是指 JIT 即时编译器，指把字节码指令编译成机器码指令的编译器。
- **静态编译器**：类似于 Java9 中的 AOT 编译器，是指把`.java`源代码直接编译为机器码指令的编译器。
# 1. JIT 定义

>JIT（Just-In-Time Compilation，即时编译）是 Java 虚拟机（JVM）中的一项关键技术，其目的是提高 Java 程序的运行效率。JIT 编译器在程序运行时，将 Java 字节码动态编译为本地机器码，使代码能够直接在底层硬件上运行，而无需逐行解释，从而大幅提升性能。

****
# 2. JIT 的分类

>在 JVM 运行过程中采用的解释器 + 编译器混合执行的模式，其中的编译器一般是指 JIT 编译器。在 HotSpot 虚拟机中内嵌着两个 JIT 即时编译器，分别为 `Client Compiler` 与 `Server Compiler` ，也就是 C1 和 C2 编译器，JVM 在 64 位的系统中默认采用的C2编译器，也就是 `Server Compiler` 编译器。不过同样的，在程序启动的时候也可以通过参数显式指定运行时到底采用哪种编译器

- -client：指定JVM运行时采用 C1 编译器。
    - C1编译器会对字节码进行简单和可靠的优化，耗时比较短，追求编译速度。
- -server：指定JVM运行时采用 C2 编译器。
    - C2编译器会对字节码进行激进优化，耗时比较长，追求编译后的执行性能。

****
## 2.1 C1 编译器

| 特性         | 描述                       |
| ---------- | ------------------------ |
| **启动速度快**  | 编译逻辑相对简单，适合快速启动程序        |
| **编译耗时短**  | 相比 C2，优化级别低，因此编译时间短      |
| **优化策略保守** | 只做一些基础的、安全的优化            |
| **调试友好**   | 编译后保留较多调试信息，利于开发过程中的错误定位 |

### 2.1.1 C1 编译器的工作原理与执行流程

1、字节码执行初期：使用解释器

>JVM 初次执行方法时，会使用解释器对字节码逐条执行，目的是快速启动程序，避免编译延迟

2、触发编译：热点探测

>当某个方法或循环体被调用的次数达到一定阈值，JVM 就会将其认定为热点代码，此时 C1 编译器就会开始介入，将这段字节码编译为本地机器码，以提升后续运行效率

3、编译为本地代码

>C1 编译器在将字节码编译成本地机器码的过程中会对代码做出一定的改写或重组，以提升运行效率，优化后生成的机器码会保存在代码缓存中供后续调用。优化的目标包括：

- 减少不必要的计算（比如去掉无用的代码）
    
- 减少函数调用开销（比如方法内联）
    
- 提前判断条件或预测分支
    
- 尽可能减少堆内存分配
    
- 让 CPU 更容易缓存、预测下一步执行的代码路径

****
### 2.1.2 C1 编译器主要优化手段


