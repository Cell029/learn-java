
# 1. 获取 Class 的三种方式

## 1.1 使用 `.class` 语法获取 `Class` 对象（编译期静态获取）

```java
Class<?> clazz = ClassName.class;

Class<String> stringClass = String.class;
```

**特点：**

- 在编译期就能确定类型，安全性好。

- 不需要对象或字符串名，适合静态类型已知的情况。

- 即使类没有被实例化，也能获取它的 `Class`。

****
## 1.2 使用 `对象.getClass()` 方法获取（运行时动态获取）

```java
Class<?> clazz = obj.getClass();

String str = "Hello";
Class<?> clazz = str.getClass();

// 或者
Class<?> clazz = (new 对象).getClass();
```

**特点：**

- **通过对象获取，属于运行时行为**。

- 安全性较好，不易出错。

- 常用于处理对象时，动态判断类型。

****
## 1.3 使用 `Class.forName(String className)` 方法（动态加载）

```java
Class<?> clazz = Class.forName("java.lang.String");
```

**特点：**

- 通过类的完全限定名动态加载类，是在运行时加载类。

- 会触发类的加载、连接、初始化（即执行静态代码块等）。

- 若类名写错或类不存在，会抛出 `ClassNotFoundException`。

****

```java
public class Test {  
    static {  
        System.out.println("Person：静态代码块");  
    }  
  
    {        System.out.println("Person：动态代码块");  
    }  
  
    public Test() {  
        System.out.println("Person：构造方法");  
    }  
}
```

```java
Class<?> clazz1 = Test.class;  
System.out.println("---------------");  
Class<?> clazz2 = Class.forName("com.cell.demo_23.Test");  
System.out.println("---------------");  
Class<?> clazz3 = new Test().getClass();
```

```
---------------
Person：静态代码块
---------------
Person：动态代码块
Person：构造方法
```

>通过 `Test.class` 的方法获取对象的Class对象，不会调用对象中任何的代码块或代码， `Class.forName()` 会调用静态代码块的内容，`对象.getClass()` 则会打印所有内容，因为它需要先创建一个对象

| 获取方式                   | 是否初始化类 | 是否执行静态代码块   | 是否执行实例代码块和构造器 |
| ---------------------- | ------ | ----------- | ------------- |
| `Test.class`           | 否      | 不执行         | 不执行           |
| `Class.forName("xxx")` | 是      | 执行          | 不执行           |
| `对象.getClass()`        | 是      | 执行（如果还没执行过） | 执行            |

>`Test.class` 是被动引用，不会触发类初始化；`Class.forName()` 是主动使用类，会执行静态代码块；`new Test()` 创建对象，会执行所有代码块（先静态 -> 实例 -> 构造方法）

****
# 2. 