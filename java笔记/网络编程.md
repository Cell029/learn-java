
>利用计算机网络实现程序之间的一种编程方式，在网络编程中程序需要通过网络协议（如TCP/IP）进行通信，以实现不同计算机之间的数据传输和共享。

# 1. IP 地址

>IP 地址是为网络中的每一个设备分配的唯一地址，使其能够通过网络进行通信，每个 IP 地址必须在同一网络中是唯一的。

## 1.1 IP 地址的格式

>IPv4 地址是一个 32 位（bit）二进制数，而为了方便记忆采用了点分十进制的标记方式（xxx . xxx . xxx），也就是将 32 位 IP 地址以每 8 位为组，共分为 4 组，每组以 `.` 隔开，再将每组转换成十进制，每一个 `xxx` 的取值范围是 0 ~ 255，组合起来可以达到 2<sup>8</sup> · 2<sup>8</sup> ·2<sup>8</sup>  = 2<sup>32</sup> = 4294967296 个。


![](images/网络编程/file-20250511212548.png)

>IPv6 使用16个字节（1 个十六进制为 4 个二进制，即半个字节）表示 IP 地址（128位），总共分为八组，每组之间用 `:` 隔开，一组就是 4 位 16 进制（即 2 字节），通常前导 0 可以省略

```
2001:0db8:0000:0000:0000:ff00:0042:8329
即
2001:db8:0:0:0:ff00:42:8329
连续的 0 用 :: 表示（只能使用一次）
2001:db8::ff00:42:8329
```



****
## 1.2 IP 地址的组成

1、网络号（Net ID / 网络地址）

>网络号用于标识“设备所属的网络（网段）”，所有位于同一网段的设备，其网络号必须一致，不同网络号 = 不同网段，例如：192.168.1.0/24 中的 `192.168.1` 就是网络号。
>
>如果两个设备 IP 网络号不同，就算物理连着也不能通信，需要依赖三层设备（如路由器）来转发。

2、主机号（Host ID / 主机地址）

>用于标识“该网络中的某台具体设备”，同一个网段中的每个主机号必须唯一，不能重复，例如：192.168.1.10 中的 `10` 就是主机号部分

**假设有一个 IP 地址：`192.168.1.25/24`**

>`/24` 表示前 24 位是网络号（即：192.168.1），剩下的 8 位是主机号，所以网络号是：`192.168.1.0`，主机号是：`25`

>在这个网段中，合法主机号范围是：`192.168.1.1 ~ 192.168.1.254` （其中 `192.168.1.0` 是网络地址，`192.168.1.255` 是广播地址）

****
## 1.3 IP 地址分类

>互联网诞生之初，IP 地址显得很充裕，它被分类成了 5 种类型。

![](images/网络编程/file-20250511214212.png)

>A、B、C 类主要分为两个部分，分别是网络号和主机号。而 D 类和 E 类地址是没有主机号的，所以不可用于主机 IP，D 类常被用于多播，E 类是预留的分类，暂时未使用。

![](images/网络编程/file-20250511220232.png)

![](images/网络编程/file-20250511220237.png)

**IP 地址分类的优点：**

1、不同类型的网络有不同的地址需求。

- **A 类地址**适用于需要大量地址的组织（例如大型公司或 ISP）。

- **B 类地址**适用于中等规模的网络（例如中型公司或学校）。

- **C 类地址**适用于小型网络（如小企业或家庭网络）。

- **D 类和 E 类地址**则用于特定应用，如多播和保留地址。

2、通过 IP 地址的分类，可以确保每类地址在特定的网络需求下分配合适的数量，通过将 A、B、C 类地址区分开，能够避免小型网络占用过多的 IP 地址资源。

3、不同网络使用不同的地址类别可以有效避免地址冲突，特别是在较大的网络中，如果所有设备都使用相同的地址空间（没有分类）就可能导致地址重复，从而发生网络通信错误。IP 地址分类帮使得不同的网络设备在不同的地址范围内操作，从而避免冲突。

****
## 1.4 域名和 DNS

### 1.4.1 域名

>域名是互联网上某个服务器的可读名字，它本质上是对 IP 地址的一种别名，让 IP 地址以一种更好读的形式呈现

| 域名                                       | 对应 IP 地址      |
| ---------------------------------------- | ------------- |
| [www.baidu.com](http://www.baidu.com/)   | 110.242.68.3  |
| [www.google.com](http://www.google.com/) | 142.250.204.4 |

```
www.baidu.com
│    │     │
│    │     └── 顶级域（.com）
│    └─────── 二级域（baidu）
└─────────── 三级域（www）
```

****
### 1.4.2 DNS

>DNS 是域名系统，它的作用是将域名解析为 IP 地址，当在浏览器输入 `www.baidu.com` 时，DNS 会查出它的实际 IP 地址，然后浏览器就能访问到这个服务器。

****
# 2. 端口号（port）

>在计算机中，不同的应用程序是通过端口号区分的，端口号是一个 16 位的整数（2 个字节，无符号），范围从 0 到 65535，通常情况下服务器使用固定的端口号监听客户端的请求，而客户端则使用随机的端口连接服务器，必须同时指定 IP 地址和和端口号才能正确的发送数据

1、公认端口：

>范围：0 ~ 1023，这些端口号通常被操作系统和网络应用预留，用于常见的服务

2、注册端口

>范围：1024 ~ 49151，这些端口通常被应用程序使用，可以通过 IANA 注册，它们不如公认端口普遍，但仍有特定的应用程序使用

3、动态/私有端口

>范围：49152 ~ 65535，这些端口通常由客户端应用程序动态分配使用，尤其在进行短期或临时的连接时。


**在选择端口号时，通常需要考虑以下几个方面：**

- **避免使用已知的端口号**：如 80、443、21 等，它们是被操作系统或常见应用程序使用的。

- **选择一个高位端口**：一般来说，选择 1024 ~ 49151 之间的端口会更合适，避免和操作系统或常见服务冲突。

- **避免端口冲突**：确保应用程序监听的端口没有被其他程序占用。

- **考虑防火墙和网络配置**：某些端口可能会被防火墙阻挡，选择合适的端口避免网络问题。

**常见的端口号**

| 服务类型       | 端口号  |
| ---------- | ---- |
| HTTP       | 80   |
| HTTPS      | 443  |
| FTP        | 21   |
| SSH        | 22   |
| SMTP       | 25   |
| MySQL      | 3306 |
| PostgreSQL | 5432 |
| RDP (远程桌面) | 3389 |
| DNS        | 53   |
| Telnet     | 23   |
| POP3       | 110  |
| IMAP       | 143  |
| Tomcat     | 8080 |
****
# 3. 通信协议

1、通过计算机网络可以使多台计算机实现连接，位于同一个网络中的计算机在进行连接和通信时需要遵守一定的规则。就像两个人想要顺利沟通就必须使用同一种语言一样，如果一个人只懂英语而另外一个人只懂中文，这样就会造成没有共同语言而无法沟通。


2、在计算机网络中，这些连接和通信的规则被称为网络通信协议，它对数据的传输格式、传输速率、传输步骤等做了统一规定，通信双方必须同时遵守才能完成数据交换。


3、在计算机网络中，常用的协议有TCP、UDP、HTTP、FTP等。这些协议规定了数据传输的格式、传输方式和传输顺序等细节。其中，TCP（传输控制协议）是一种可靠的面向连接的协议，它提供数据传输的完整性保证；而UDP（用户数据报协议）则是一种无连接的协议，传输效率高。在网络编程中，需要选取合适的协议类型来实现数据传输。

****
# 4. OSI 七层模型

>OSI 七层模型（Open Systems Interconnection Model，开放式系统互联参考模型）是由国际标准化组织（ISO） 提出的一种网络通信模型标准，它将网络通信过程划分为七个层次，每一层都承担特定的功能，并为其上一层提供服务。

![](images/网络编程/file-20250512140731.png)

>第一层是物理层，第七层是应用层，发送方从最高层开始（应用层），从上到下按顺序传输数据，每一层都会对上层传下来的数据进行处理，并加上本层的首部信息，形成封装后的数据。而接收端则将顺序反过来，从首层开始（物理层），将数据的内容与该层对应的首部拆开，传给上一层。
>
>A 要将一件易碎品寄送给 B ，A 所在的快递站有一个由七人组成的打包小组，每个人只负责接收上一个人交过来的包裹，并在其外面再套上一层更大的盒子。最先处理的是第一位打包员（对应应用层），他将原始物品包好后交给第二位打包员（表示层），如此重复，直到第七位（物理层）完成了最终打包并送出包裹。当包裹送达 B 所在的快递站后，同样有七人负责拆包，他们按顺序每人只拆掉最外层的包装，然后交给下一个人处理，直到第七人（应用层）最终取出包裹中的原始物品交给B。

****
## 4.1 应用层（第 7 层）

>应用层是OSI七层模型中的第七层，也是最靠近用户的一层，它直接面向应用程序，提供用户与网络之间的接口。换句话说，用户通过应用层来使用网络，实现诸如发送电子邮件、浏览网页、文件传输等功能。**注意：应用层并不等同于“应用程序”，而是操作系统或网络框架中为应用程序提供网络服务的一层协议集合。**

### 4.1.1 应用层的作用

1、**为应用程序提供网络服务接口**  

>应用层协议定义了应用程序之间通信的规则，使不同主机上的应用程序可以进行数据交换。

2、**提供数据表示、加密和会话管理支持（部分与表示层/会话层重叠）**  

>在现实的网络模型（如TCP/IP）中，很多功能合并到了应用层中，例如数据的编码和格式转换（表示层的功能）、用户身份验证、访问控制等（会话层的功能）

3、**完成具体的网络功能，如邮件、文件传输、远程登录等**

****
### 4.1.2 常见应用层的协议

|协议名称|全称|主要用途|
|---|---|---|
|HTTP|HyperText Transfer Protocol|浏览网页|
|HTTPS|HTTP Secure|加密网页传输|
|FTP|File Transfer Protocol|文件上传与下载|
|SMTP|Simple Mail Transfer Protocol|发送邮件|
|POP3|Post Office Protocol v3|接收邮件|
|IMAP|Internet Message Access Protocol|更复杂的邮件管理|
|DNS|Domain Name System|域名解析|
|DHCP|Dynamic Host Configuration Protocol|动态获取IP地址|
|Telnet|远程登录协议|命令行远程访问|
|SSH|Secure Shell|加密的远程登录|

>这些协议负责解决“要干什么”，而不是“怎么传”或“怎么保证不丢”

****
### 4.1.3 应用层通信基本流程

1、在浏览器中输入网址 `https://www.baidu.com`

2、浏览器调用 DNS 协议，将域名转换为IP地址

3、建立与服务器的 TCP 连接（由下层完成）

4、浏览器使用 HTTP 或 HTTPS 协议，发送请求数据

5、服务器使用 HTTP 协议返回网页内容

6、浏览器解析内容并展示

****
## 4.2 表示层（第 6 层）

>表示层是第六层，它的主要解决通信双方在数据表示上的差异，确保发送方和接收方能够正确理解数据的格式和内容，应用层负责“做什么”，而表示层负责“怎么表达”。

### 4.2.1 核心功能

1、数据格式转换

>不同的计算机系统可能使用不同的数据表示方式（如字符编码、浮点表示等），表示层负责统一格式，使双方能正确解析数据。

2、数据压缩

>为了提高网络传输效率，表示层可以对数据进行压缩，减少传输的数据量。

3、数据加密与解密

>表示层可以在数据传输前进行加密，接收方在此层进行解密，从而确保通信的安全性。

| 功能      | 举例说明                                  |
| ------- | ------------------------------------- |
| 编码转换    | 发送方用 UTF-8 编码字符串，接收方用 GBK，需要转换        |
| 图像/音频压缩 | 视频会议中压缩音频和视频流，如 H.264 编码              |
| 加密处理    | 使用 SSL/TLS 加密网页传输数据                   |
| 数据结构转换  | 如结构体、对象的序列化与反序列化（Java 中的 JSON/XML 解析） |
****
### 4.2.2 基本流程

1、浏览器发送请求，请求一个网页（应用层）

2、表示层将网页内容以 UTF-8 编码、GZIP 压缩、SSL 加密（这一步由浏览器+协议共同完成）

3、数据下传到传输层、网络层等，最终通过物理链路传送

4、服务器接收数据后，反向进行 SSL 解密 -> GZIP 解压缩 -> UTF-8 解码 -> 交给应用程序处理

****
## 4.3 会话层（第 5 层）

>用来建立、管理、维护和终止通信双方之间的“会话”（Session）

### 4.3.1 主要功能

1、会话的建立、管理与终止

>确保通信双方知道“什么时候开始通话，什么时候结束通话”，类似于打电话：要先拨号接通（建立会话）、交谈（会话管理）、挂断（会话终止）

2、会话控制（同步与对话管理）

>控制通信方式（单向/双向、轮流/同时）：半双工（你说我听）；全双工（我们同时说）

3、会话恢复

>提供同步点（Sync Point）：在数据传输过程中设置检查点，当出错时从检查点恢复，而不是从头开始

****
## 4.4 传输层

>传输层起着可靠传输的作用，只在通信双方节点进行处理，而不需在路由器上处理，此层有两个具有代表性的协议： `TCP` 与 `UDP` 

### 4.4.1 核心功能

1、端到端通信

>不像网络层只关注主机与主机之间的通信，传输层进一步关注主机中具体哪个应用程序之间的通信，通过端口号进行标识，实现应用到应用的通信。例如电脑上的浏览器通过 80 端口请求网页，服务器的 Web 服务也监听 80 端口

2、可靠的数据传输

- **数据分段与重组**（Segmenting and Reassembly）

- **确认应答机制（ACK）**

- **重传机制（Timeout & Retransmission）**

- **序号与乱序重排（Sequencing）**

- **差错检测（如校验和）**

3、流量控制

>解决发送方太快、接收方太慢的问题，控制发送速率，防止接收方缓冲区溢出

****
### 4.4.2 基本流程（TCP 协议）

1、连接建立 -- 三次握手

>客户端与服务器通过三次消息交互建立连接，确认彼此的发送与接收能力

2、数据传输 -- 数据包段处理、排序、校验

>传输中进行编号、确认、差错检测与重传等，确保数据可靠送达

3、连接终止 -- 四次挥手

>传输完成后，由双方协商关闭连接，释放资源

****
