
>约束（Constraint）是数据库表中用于限制字段取值范围的规则，用于保证数据的完整性、一致性 和准确性

|约束类型|关键词|作用说明|
|---|---|---|
|主键约束|`PRIMARY KEY`|唯一标识一行记录，不能重复，不能为 NULL|
|非空约束|`NOT NULL`|字段值不能为空|
|唯一约束|`UNIQUE`|字段值必须唯一，可以有 NULL|
|默认值约束|`DEFAULT`|设置字段的默认值|
|外键约束|`FOREIGN KEY`|建立与另一张表的关系|
|检查约束|`CHECK`|限制字段的取值范围（MySQL 8.0+支持）|

# 1. 非空约束

>非空约束（`NOT NULL`）用于确保某个列在插入或更新数据时不能为 NULL（空值）

## 1、创建表时添加非空约束

```sql
CREATE TABLE student (
    id INT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    age INT
);
```

>表示 `name` 字段不能为 NULL，而 `age` 可以为 NULL

## 2、修改已有表，添加非空约束

```sql
ALTER TABLE student
MODIFY name VARCHAR(50) NOT NULL;
```

>如果原先字段是 NULL 的，想改成 NOT NULL，该字段的记录中就不能有已有的 NULL 值，否则会报错

## 3、插入或更新数据时的影响

如果某个字段已经使用了非空约束，那么就不能添加 NULL 记录：

```sql
INSERT INTO student (id, name) VALUES (1, NULL); -- 报错
UPDATE student SET name = NULL WHERE id = 1; -- 报错
```

****
# 2. 检查约束

>`CHECK` 约束是一种列级或表级约束，用于限制列中存储的数据必须满足指定的逻辑表达式（通常是布尔条件），即让字段的值必须符合一定条件才能被插入或更新

## 1、在建表时定义 CHECK

1、列级：

```sql
CREATE TABLE student (
    id INT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    age INT CHECK (age >= 0 AND age <= 150)
);
```

>限制 `age` 必须在 0 到 150 之间

2、表级：

```sql
CREATE TABLE employee (
    id INT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    salary DECIMAL(10,2),
    CHECK (salary >= 0)
);
```

>限制整个表中 `salary` 字段必须大于等于 0

## 2、使用 ALTER TABLE 添加检查约束（默认表级）

```sql
ALTER TABLE employee
ADD CONSTRAINT chk_salary CHECK (salary >= 0);
```

>`chk_salary` 是自定义的约束名

****
# 3. 唯一性约束

>唯一性约束（`UNIQUE`）用于确保表中某个字段的值不能重复

## 1、在建表时添加

1、列级：

```sql
CREATE TABLE student (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    email VARCHAR(100) UNIQUE
);
```

>限制 `email` 字段中的值必须唯一

2、表级：

```sql
CREATE TABLE student (
    id INT,
    name VARCHAR(50),
    email VARCHAR(100),
    CONSTRAINT unq_email UNIQUE (email)
);
```

>`unq_email` 是自定义约束名，它是表级唯一约束，但功能同样是限制 `email` 唯一

## 2、使用 ALTER TABLE 添加约束

```sql
ALTER TABLE student
ADD CONSTRAINT unq_email UNIQUE (email);
```

****
# 4. 主键约束

>主键约束（`PRIMARY KEY`）是用于唯一标识表中每一条记录的约束，保证数据唯一且非空

## 1、创建表时指定单字段主键

1、列级：

```sql
CREATE TABLE student (
    id INT PRIMARY KEY,
    name VARCHAR(50)
);
```



