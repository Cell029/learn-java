
# 1. 定义

>数据库表（Table）是关系型数据库中最基本的数据存储单元，类似于 Excel 表格，由行（row）和列（column）组成，每一行表示一条记录，每一列表示一个字段，即某种属性

****
# 2. 组成元素

1、表名

- 表的唯一标识，命名一般使用小写字母，多个单词用下划线分隔（如 `user_info`）
- 命名应具有业务含义，能反映所存储的数据内容

2、字段

每个字段代表数据记录中的一个属性，包括：

- 字段名（如 `id`、`name`）

- 数据类型（如 `INT`、`VARCHAR`、`DATE`）

- 长度限制（如 `VARCHAR(50)`）

- 是否允许为空（`NULL`/`NOT NULL`）

- 默认值（`DEFAULT`）

- 约束（如主键、唯一、外键）

3、行

每一行是表中的一条数据记录，字段值按列一一对应，行数可动态增加或删除

****
# 3. 字段数据类型

## 1、数值类型

- `INT`：整数类型，常用于 id、计数类字段

- `BIGINT`：大整数（适合超过 21 亿的数据）

- `FLOAT` / `DOUBLE`：浮点型，存储小数

- `DECIMAL(10,2)`：高精度小数，适合金额（最多 10 位十进制数，包括小数点前后，其中小数点后保留 2 位）

|类型|占用空间|范围（有符号）|常用于|
|---|---|---|---|
|`TINYINT`|1 字节|-128 到 127|状态位、布尔|
|`SMALLINT`|2 字节|-32,768 到 32,767|年份、等级|
|`MEDIUMINT`|3 字节|-8 百万 到 8 百万|较小范围ID|
|`INT` 或 `INTEGER`|4 字节|-21亿 到 21亿|学号、编号、ID|
|`BIGINT`|8 字节|超大整数|银行卡号、订单号|


## 2、字符串类型

- `CHAR(n)`：定长字符串，占用固定长度（速度快）

- `VARCHAR(n)`：变长字符串（节省空间）

- `TEXT`：长文本（如文章内容）

| 类型           | 最大长度        | 特点和适用场景                   |
| ------------ | ----------- | ------------------------- |
| `CHAR(n)`    | 最多 255 字符   | **定长**，效率高，适合固定长度字段（如身份证） |
| `VARCHAR(n)` | 最多 65535 字节 | **变长**，节省空间，适合普通文本        |
| `TEXT`       | 64KB        | 长文本，如评论、文章                |
| `TINYTEXT`   | 255 字节      | 简短文本，如昵称                  |
| `MEDIUMTEXT` | 16MB        | 较大文本，如日志、新闻正文             |
| `LONGTEXT`   | 4GB         | 超长文本，如小说、文档               |
| `ENUM(...)`  | 枚举值         | 限定字段只能取特定值，如性别、状态         |
| `SET(...)`   | 多选集合        | 可选多个值组合（少见）               |


## 3、日期/时间类型

- `DATE`：年月日，如 `2025-05-18`

- `TIME`：时分秒，如 `14:30:00`

- `DATETIME`：完整时间日期

- `TIMESTAMP`：时间戳（自动记录时间）

| 类型          | 格式                  | 说明            |
| ----------- | ------------------- | ------------- |
| `DATE`      | YYYY-MM-DD          | 仅日期，如生日       |
| `TIME`      | HH:MM:SS            | 仅时间，如打卡时间     |
| `DATETIME`  | YYYY-MM-DD HH:MM:SS | 常用时间类型，24 小时制 |
| `TIMESTAMP` | 同上，但与时区有关           | 会自动与当前时区转换    |
| `YEAR`      | YYYY（如 2025）        | 表示年份（已较少使用）   |

## 4、二进制类型

|类型|最大存储空间|描述|
|---|---|---|
|`TINYBLOB`|255 字节|适合存储小文件，如缩略图|
|`BLOB`|65,535 字节（约 64KB）|常规使用，适合中小型数据|
|`MEDIUMBLOB`|16,777,215 字节（约 16MB）|中型数据，如普通音频|
|`LONGBLOB`|4,294,967,295 字节（约 4GB）|超大文件，如高清视频|

>BLOB 类型用于存储非结构化二进制数据，例如图片、视频等，与文本类型不同，BLOB 类型是按字节存储的原始数据，不会自动进行字符编码转换

```sql
-- 创建表时使用 BLOB 类型
CREATE TABLE files (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255),
    file_data LONGBLOB, -- 存储二进制文件
    upload_time DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

****
# 4. 常见约束

 1、`PRIMARY KEY`（主键）

- 唯一标识每一条记录

- 通常设置在 `id` 字段  

- 每个表只能有一个主键


2、`UNIQUE`（唯一约束）

- 保证该列的值在整个表中不重复

- 可用于如邮箱、手机号等字段


3、`NOT NULL`（非空约束）

- 表示字段值不能为空

4、`DEFAULT`（默认值）

- 若插入数据未指定该字段，则自动使用默认值


5、`AUTO_INCREMENT`（自增）

- 数值自动递增（通常用于主键）


6、`FOREIGN KEY`（外键）

- 建立与其他表的联系

- 约束字段的值必须来自另一个表的主键

****
# 5. 表的创建

```sql
CREATE TABLE 表名 (
    列名1 数据类型 [约束],
    列名2 数据类型 [约束],
    ...
);
```

```sql
-- 创建一个名为 students 的表，包含 id、name 和 age 三个字段
CREATE TABLE students (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    age INT
);
```

****
# 6. 表的三种基本关系

## 6.1 一对一

>A 表中的一条记录只对应 B 表中的一条记录，反之亦然，例如一个人对应一个身份证号码，一个身份证只能属于一个人

实现方式：

- 一方的主键作为另一方的外键（且唯一）
- 或者两张表共用主键

```sql
CREATE TABLE person (
  id INT PRIMARY KEY,
  name VARCHAR(50),
  card_id INT UNIQUE,
  FOREIGN KEY(card_id) REFERENCES id_card(id)
);

CREATE TABLE id_card (
  id INT PRIMARY KEY,
  card_number VARCHAR(20) UNIQUE
);
```

****
## 6.2 一对多

>A 表中的一条记录可以对应 B 表中多条记录，但 B 表中的一条记录只对应 A 表中的一条记录，例如一个班级有多个学生，一个学生只属于一个班级

实现方式：

- 多的那方的表设置一个外键，指向一的那方表的主键

```sql
CREATE TABLE class (
  id INT PRIMARY KEY,
  class_name VARCHAR(50)
);

CREATE TABLE student (
  id INT PRIMARY KEY,
  name VARCHAR(50),
  class_id INT,
  FOREIGN KEY(class_id) REFERENCES class(id)
);
```

****
## 6.3 多对多

>A 表中的一条记录对应 B 表中的多条记录，反之亦然，例如一个学生可以选多门课程，一门课程可以被多个学生选修

实现方式：

- 使用中间关联表将多对多转化为两个一对多关系

```sql
CREATE TABLE student (
  id INT PRIMARY KEY,
  name VARCHAR(50)
);

CREATE TABLE course (
  id INT PRIMARY KEY,
  name VARCHAR(50)
);

-- 中间关联表
CREATE TABLE student_course (
  student_id INT,
  course_id INT,
  PRIMARY KEY(student_id, course_id),
  FOREIGN KEY(student_id) REFERENCES student(id),
  FOREIGN KEY(course_id) REFERENCES course(id)
);
```

****

