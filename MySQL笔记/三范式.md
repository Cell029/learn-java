
>范式是用于衡量关系数据库设计规范程度的标准，不同范式级别提出了不同的设计规则，遵循这些规则可以避免数据冗余（如重复存储相同信息）、防止数据异常（如更新/删除异常）、增强数据一致性，范式的目标就是通过规范字段划分与表关系，消除这些异常现象

|范式|目标|要求|
|---|---|---|
|第一范式|消除重复字段，保持原子性|每个字段不可再分（保持原子性）|
|第二范式|消除部分依赖，保持完整性|满足1NF，且每个非主属性完全依赖于主键|
|第三范式|消除传递依赖，增强一致性|满足2NF，且非主属性不依赖于其他非主属性（无传递依赖）|

# 1. 第一范式（1NF）

>第一范式要求数据库中的每个表的每个字段（列）都具有原子性，即字段中的值不可再分割（每个字段只能存储一个单一的值，不能包含集合、数组或重复的组）

例如：

| 学生ID | 姓名  | 电话号码                 |
| ---- | --- | -------------------- |
| 1    | 张三  | 123456789, 987654321 |
| 2    | 李四  | 555555555            |

>在这个表中，电话号码 字段包含多个号码，违反了1NF 的原子性要求，为了满足 1NF，需要将电话号码拆分为单独的记录或创建一个新的表

满足 1NF 后的设计：

|学生ID|姓名|
|---|---|
|1|张三|
|2|李四|

|电话ID|学生ID|电话号码|
|---|---|---|
|1|1|123456789|
|2|1|987654321|
|3|2|555555555|

****
# 2. 第二范式（2NF）

>在满足 1NF 的基础上，每个非主属性必须完全依赖于主键，而不能只依赖于主键的一部分

| 订单ID | 商品ID | 商品名称 | 数量  | 单价  |
| ---- | ---- | ---- | --- | --- |
| 1001 | A01  | 苹果   | 10  | 2.5 |
| 1001 | A02  | 橙子   | 5   | 3.0 |
| 1002 | A01  | 苹果   | 7   | 2.5 |

>在上述表中，单独的订单 ID 不能唯一确定一行（一个订单可以有多个商品）；单独的商品 ID 也不能唯一确定一行（同一个商品可能出现在多个订单中）；只有“订单 ID + 商品 ID”这个组合才能唯一标识一条记录，所以主键是复合主键 (订单ID、 商品ID)。商品名称和单价只依赖于复合主键中的商品ID，而不是整个主键，存在部分依赖，违反了 2NF

满足 2NF 设计后：

|订单ID|商品ID|数量|
|---|---|---|
|1001|A01|10|
|1001|A02|5|
|1002|A01|7|

|商品ID|商品名称|单价|
|---|---|---|
|A01|苹果|2.5|
|A02|橙子|3.0|

****
# 3. 第三范式

>第三范式要求满足第二范式，并且消除表中的传递依赖，即非主键字段不应依赖于其他非主键字段，也就是所有非主键字段必须直接依赖于主键，而不是通过其他非主键字段间接依赖

|员工ID|员工姓名|部门ID|部门名称|
|---|---|---|---|
|E01|王五|D01|销售部|
|E02|赵六|D02|技术部|
|E03|孙七|D01|销售部|

>在这个表中，主键是员工 ID ，部门名称依赖于部门 ID，而部门 ID 依赖于主键员工 ID，形成了传递依赖，违反了3NF

满足 3NF 设计后：

|员工ID|员工姓名|部门ID|
|---|---|---|
|E01|王五|D01|
|E02|赵六|D02|
|E03|孙七|D01|

|部门ID|部门名称|
|---|---|
|D01|销售部|
|D02|技术部|

****
# 4. 破坏三范式

>在某些情况下为了满足性能，简化设计等要求，可能会违反三范式

## 4.1 冗余字段

>在高并发、大数据量的应用场景中，严格遵循三范式可能导致频繁的联表查询，增加查询时间和系统负载。为了提高查询性能，可能会通过冗余数据来减少联表操作

假设有一个电商系统，包含订单表 `Orders` 和用户表 `Users`。在严格 3NF 设计中，订单表只存储用户 ID，想要获取用户信息就需要通过联表查询。

但是，为了查询性能，通常会在订单表中冗余存储用户姓名和用户地址等信息，查询订单信息时就不用联表查询 `Users` 表，从而提升查询速度。

**破坏 3NF后的设计：**

| 订单ID | 用户ID | 用户姓名 | 用户地址 | 总金额  |
| ---- | ---- | ---- | ---- | ---- |
| 1001 | U01  | 张三   | 北京市  | 500元 |
| 1002 | U02  | 李四   | 上海市  | 300元 |

****
## 4.2 多值字段

>在小型项目或不需要频繁关联查询的场景中，使用多值字段可以减少关联表设计，逻辑更直观、编码成本更低

| 商品ID | 商品名 | 标签         |
| ---- | --- | ---------- |
| A01  | 苹果  | 新鲜, 绿色, 进口 |

>对于一个展示型系统，读取速度比结构规范更重要，此时将标签存在一个字段中反而更简单，减少联表查询

****
## 4.3 合并实体表

|员工ID|姓名|部门ID|
|---|---|---|
|E01|张三|D01|
|E02|李四|D02|
|E03|王五|D01|

|部门ID|部门名称|
|---|---|
|D01|销售部|
|D02|技术部|

合并后：

|员工ID|姓名|部门ID|部门名称|
|---|---|---|---|
|E01|张三|D01|销售部|
|E02|李四|D02|技术部|
|E03|王五|D01|销售部|

>合并后结构更简单，不需要外表联查

****



