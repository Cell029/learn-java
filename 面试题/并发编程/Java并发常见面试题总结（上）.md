
# 1. 什么是线程和进程

[进程](多线程.md#2.1%20进程)

[线程](多线程.md#2.2%20线程)

****
# 2. Java 线程和操作系统的线程有什么区别

Java 线程是 JVM（Java 虚拟机）中对线程的抽象表示，通过 `java.lang.Thread` 类来创建和管理线程，运行时依赖 JVM 的实现和操作系统的调度机制。

操作系统线程是由操作系统内核调度和管理的线程，每个线程由内核分配资源（如堆栈、寄存器）并进行调度，是 CPU 实际运行和调度的最小单位。

现代 JVM 中，Java 线程通常是一对一映射到 OS 线程的，每创建一个 Java 线程，JVM 就通过本地方法（如 pthreads）创建一个 OS 线程，JVM 依赖操作系统来进行调度。假设在 Java 中创建了 10 个线程，那么操作系统层面也会创建 10 个真实的内核线程，由 OS 调度运行。

|对比维度|Java 线程|操作系统线程|
|---|---|---|
|所属层级|Java 应用层（JVM）|操作系统内核|
|管理者|JVM 管理（Thread API）|OS 内核调度器|
|创建方式|`new Thread()`、`Executors`|系统调用（如 `pthread_create`）|
|调度机制|依赖 OS 线程调度|由内核根据调度算法决定（如时间片）|
|资源分配|JVM 为线程分配栈帧、局部变量表等|OS 分配线程堆栈、寄存器等|
|性能成本|创建开销较小（抽象层）|创建和切换成本较高|
|数量限制|JVM 参数限制（如 `-Xss`）、堆内存|OS 限制（进程资源、线程栈）|

****
# 3. 进程与线程的关系、区别及优缺点

[进程和线程的区别](多线程.md#2.3%20进程和线程的区别)

****
# 4.  如何创建线程

[线程的实现方式](多线程.md#4.%20​%20线程的实现方式)

****
# 5. 线程的生命周期和状态

[生命周期的七大状态](多线程.md#5.%20生命周期的七大状态)

****
# 6. 什么是线程上下文切换

线程在执行过程中会有自己的运行条件和状态（也称上下文），比如程序计数器、栈信息等。当出现如下情况的时候，线程会从占用 CPU 状态中退出：

- 主动让出 CPU，比如调用了 `sleep()`, `wait()` 等。
- 时间片用完，因为操作系统要防止一个线程或者进程长时间占用 CPU 导致其他线程或者进程饿死。
- 调用了阻塞类型的系统中断，比如请求 IO，线程被阻塞。
- 被终止或结束运行

线程切换意味着需要保存当前线程的上下文，程序计数器是一个专用的寄存器，用于表明指令序列中 CPU 正在执行的位置，存的值为正在执行的指令的位置或者下一个将要被执行的指令的位置，具体依赖于特定的系统，它就是用来保证线程下次占用 CPU 的时候恢复现场，并加载下一个将要占用 CPU 的线程上下文，这就是所谓的上下文切换。

上下文切换是现代操作系统的基本功能，因其每次需要保存信息恢复信息，这将会占用 CPU，内存等系统资源进行处理，也就意味着效率会有一定损耗，如果频繁切换就会造成整体效率低下。

****
# 7. Thread#sleep() 和 Object#wait()

[Thread#sleep() 和 Object#wait() 对比](多线程.md#6.6%20Thread%20sleep()%20和%20Object%20wait()%20对比)

****
# 8. 为什么 wait() 不定义在 Thread 中

`wait()` 是让获得对象锁的线程实现等待，会自动释放当前线程占有的对象锁。每个对象（`Object`）都拥有对象锁，既然要释放当前线程占有的对象锁并让其进入 WAITING 状态，自然是要操作对应的对象（`Object`）而非当前的线程（`Thread`）。

类似的问题：为什么 `sleep()` 方法定义在 `Thread` 中？

因为 `sleep()` 是让当前线程暂停执行，不涉及到对象类，也不需要获得对象锁。

****
# 9. 可以直接调用 Thread 类的 run() 吗

new 一个 `Thread`，线程进入了新建状态，调用 `start()` 方法，会启动一个线程并使线程进入了就绪状态，当分配到时间片后就可以开始运行了。 `start()` 会执行线程的相应准备工作，然后自动执行 `run()` 方法的内容，这是真正的多线程工作。直接调用 `Thread` 类的 `run()` 方法，这样不会创建一个新的线程，`run()` 方法当成一个 main 线程下的普通方法去执行，并不会在某个线程中执行它，所以这并不是多线程工作。

****
# 10. 并发与并行的区别

[并发和并行](多线程.md#1.%20并发和并行)

****
# 11. 同步和异步的区别





